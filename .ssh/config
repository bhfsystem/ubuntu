Host *
  ServerAliveInterval 60

Host github.com
  ForwardAgent no
  StrictHostKeyChecking no

Host git.nih
  User ubuntu
  Port 2222
  StrictHostKeyChecking no
  UserKnownHostsFile ~/.ssh/known_hosts.nih
  ProxyCommand bash -c 'exec nc gogs $1' -- %p

Host *.nih
  User ubuntu
  Port 2222
  StrictHostKeyChecking no
  UserKnownHostsFile ~/.ssh/known_hosts.nih
  ProxyCommand bash -c 'exec nc ${1%%.*}.node.consul $2' -- %h %p

Host *-*-*-i-*-*
  User ubuntu
  ProxyCommand bash -c 'exec nc "${1##*-}" "$2"' -- %h %p
  StrictHostKeyChecking no
  UserKnownHostsFile ~/.ssh/known_hosts.aws

Host i-*
  User ubuntu
  ProxyCommand bash -c 'exec nc "$(aws ec2 describe-instances --instance-ids i-0536eb1395fee8706 | jq -r '.Reservations[].Instances[].PrivateIpAddress')" "$2"' -- %h %p
  StrictHostKeyChecking no
  UserKnownHostsFile ~/.ssh/known_hosts.aws
